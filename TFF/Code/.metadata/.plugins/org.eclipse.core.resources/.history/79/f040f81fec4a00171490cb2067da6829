package hendek.utilisateur;

import java.sql.Connection;
import java.sql.Date;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.HashMap;

public class User {

		private HashMap<String,String> mdp;
		private HashMap<String,String> nom;
		private HashMap<String,String> prenom;
		private HashMap<String,String> address;
		private HashMap<String,String> mail;
		private HashMap<String,Date> dateins;
		private HashMap<String,String> tel;
		private HashMap<String,Integer> droit;
		private HashMap<String,String> tok;
		
		private static User singleton = null;
		
		public User getInstance(){
			if(singleton==null){
				singleton=new User();
			}
			return singleton;
		}
		
		private User(){
			mdp=new HashMap<>();
			nom=new HashMap<>();
			prenom=new HashMap<>();
			address=new HashMap<>();
			mail=new HashMap<>();
			dateins=new HashMap<>();
			tel=new HashMap<>();
			droit=new HashMap<>();
			tok=new HashMap<>();
			Connection con = null;
			try{

			    Class.forName("org.postgresql.Driver");
				String url = "jdbc:postgresql://217.182.171.28:5432/hendek";
				String nom = "postgres";
				String mdp = "Florian2*";
				con = DriverManager.getConnection(url,nom,mdp);

				Statement stmt = con.createStatement();
				stmt = con.createStatement();

				String query = "select * from utilisateur";
				ResultSet rs = stmt.executeQuery(query);
				
				while(rs.next()){
					this.mdp.put(rs.getString("login"),rs.getString("mdp"));
					this.nom.put(rs.getString("login"),rs.getString("nom"));
					prix.put(rs.getInt("idart"),rs.getDouble("prix"));
					img.put(rs.getInt("idart"),rs.getString("image"));
					nbArticle++;
				}
				
				rs=stmt.executeQuery("select * from infoart");
				while(rs.next())
					vendeur.put(rs.getInt("idart"), rs.getString("entreprise"));
				
			}catch (Exception e) {
				System.out.println("[ERROR]"+e.getMessage()+"");
			}finally{	  
				try{
					con.close();
				}catch(Exception e){
					System.out.println("[ERROR]"+e.getMessage()+"");
				}
			}
			
		}
		
		
}
