package hendek.utilisateur;

import java.sql.Connection;
import java.sql.Date;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

public class Me {
	
	private String login;
	private String mdp;//1
	private String nom;//2
	private String prenom;//3
	private String address;//4
	private String mail;//5
	private Date dateins;//6
	private String tel;//7
	private Integer droit;//8
	private String tok;//9
	
	protected Me(String login){
		this.login=login;
		Connection con=null;
		try{

			Class.forName("org.postgresql.Driver");
			String url = "jdbc:postgresql://217.182.171.28:5432/hendek";
			String nom = "hendek";
			String mdp = "hendek";
			con = DriverManager.getConnection(url,nom,mdp);

			Statement stmt = con.createStatement();
			stmt = con.createStatement();

			String query = "select * from utilisateur where login="+login;
			ResultSet rs = stmt.executeQuery(query);

			while(rs.next()){
				this.mdp.put(rs.getString("login"),rs.getString("mdp"));
				this.nom.put(rs.getString("login"),rs.getString("nom"));
				prenom.put(rs.getString("login"),rs.getString("prenom"));
				address.put(rs.getString("login"),rs.getString("address"));
				mail.put(rs.getString("login"),rs.getString("mail"));

				dateins.put(rs.getString("login"),rs.getDate("dateins"));
				tel.put(rs.getString("login"),rs.getString("tel"));
				droit.put(rs.getString("login"),rs.getInt("droit"));
				tok.put(rs.getString("login"),rs.getString("tok"));
			}



		}catch (Exception e) {
			System.out.println("[ERRORuser]"+e.getMessage()+"");
		}finally{	  
			try{
				con.close();
			}catch(Exception e){
				System.out.println("[ERRORclose]"+e.getMessage()+"");
			}
		}
	}

}
